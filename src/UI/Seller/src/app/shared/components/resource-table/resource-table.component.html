<!-- 98pc calced height is placeholder for now: will need to change to make responsive or if the layout srtructure is changed -->

<div class="form-group resource-search">
  <search-component class="mr-3 w-100"
                    [placeholderText]="'Search Products...'"
                    [searchTermInput]="searchText"
                    (searched)="searchResources($event)">
  </search-component>
</div>

<!-- full table view -->
<div *ngIf="!selectedResourceID">
  <perfect-scrollbar style="width: 100%; height: calc(100vh - 98px);"
                     (psYReachEnd)="handleScrollEnd()">
    <table class="table table-hover resource-table">
      <ng-content select="tr"></ng-content>
      <tbody>
        <ng-content *ngFor="let product of resourceList.Items; index as index"
                    (click)="selectResource(product)"
                    class="selectable-row"
                    [ngClass]="{'selected-resource':selectedIndex === index}"
                    select="table-body-row"></ng-content>
        <tr *ngIf="resourceList?.Meta?.Page < resourceList?.Meta?.TotalPages">
          <td>More products</td>
          <td></td>
          <td></td>
        </tr>
      </tbody>
    </table>
  </perfect-scrollbar>
</div>

<!-- editing/creating view -->
<div *ngIf="selectedResourceID"
     class="row">
  <div class="col-3">
    <perfect-scrollbar style="width: 100%; height: calc(100vh - 98px);"
                       (psYReachEnd)="handleScrollEnd()">
      <table class="table table-hover resource-table">
        <thead>
          <tr>
            <th scope="
            col">Name</th>

          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let product of resourceList.Items"
              (click)="selectResource(product)"
              class="selectable-row"
              [ngClass]="{'selected-resource':selectedResourceID === product.ID}">
            <td>{{product.Name}}</td>

          </tr>
          <tr>
            <td *ngIf="resourceList?.Meta?.Page < resourceList?.Meta?.TotalPages">More resources</td>
          </tr>
        </tbody>
      </table>
    </perfect-scrollbar>
  </div>
  <div class="col-9">
    <ng-content select=".resource-edit"></ng-content>
    <button (click)="saveUpdates()"
            *ngIf="JSON.stringify(updatedResource) !== JSON.stringify(resourceInSelection)">Save Changes</button>
  </div>