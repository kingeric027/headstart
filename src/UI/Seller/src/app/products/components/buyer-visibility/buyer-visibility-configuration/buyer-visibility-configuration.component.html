<div class="d-flex justify-content-between">
  <div class="container">
    <div class="row">
      <div class="col-sm">
        <h4>
          {{_buyer.Name}} <span>
            <code class="red">
              {{_buyer.ID}}
            </code>
          </span>
        </h4>    
      </div>
      <div class="col-sm">
        <ng-container>
          <span *ngIf="catalogAssignmentsStatic.length > 0">
            <div class="active-circle"></div>
            Visible in {{catalogAssignmentsStatic.length}}/{{catalogs.length}} catalogs
          </span>
          <span *ngIf="catalogAssignmentsStatic.length === 0">
            <div class="inactive-circle"></div>
            Not Visible
          </span>
        </ng-container>
      </div>
      <div class="col-sm">
        <ng-container *ngIf="!isEditing">
          <button type="button" class="btn btn-primary" (click)="edit()">Edit</button>
        </ng-container>
      </div>
    </div>
    <div *ngIf="isEditing">
      <p class="font-italic">
        Within this buyer configure the categories and catalogs in which the product will appear, and the price buyers will pay.
      </p>
    <ng-container>

      <h6>Catalogs</h6>

      <table *ngIf="catalogs.length" class="table table-hover">
        <thead>
          <tr>
            <th scope="col">Visible</th>
            <th scope="col">Catalog</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let catalog of catalogs">
            <tr class="cursor-pointer"
            (click)="toggleProductCatalogAssignment(catalog)">
            <td class="d-flex justify-content-start align-items-center">
              <label class="switch mb-0">
                <input class="form-check-input"
                type="checkbox"
                (click)="toggleProductCatalogAssignment(catalog)"
                [checked]="isAssigned(catalog.ID)">
                <span class="slider round"></span>
              </label>
            </td>
            <td>{{catalog.Name}}</td>
          </tr>
        </ng-container>
        </tbody>
      </table>

      <p *ngIf="!catalogs.length" class="alert alert-info font-weight-bold mb-0">There are no catalogs for this buyer currently.</p>

      <h6>Category</h6>
      <product-category-assignment [productID]="product.ID" [selectedCategoryID]="assignedCategoryID" [catalogID]="_buyer.ID" [isEditing]="isEditing"></product-category-assignment>
      

      <div class="mt-3 d-flex justify-content-end">
        <button *ngIf="areChanges"
                class="btn btn-primary"
                type="submit"
                [disabled]="isValidBuyerAssignment || dataIsSaving"
                (click)="executeProductCatalogAssignmentRequests()">Save</button>
        <button *ngIf="areChanges" class="btn brand-button ml-3"
                (click)="handleDiscardChanges()">Discard Changes</button>
        <button *ngIf="!areChanges" class="btn brand-button ml-3"
                (click)="handleClose()">Close</button>
      </div>
    </ng-container>
    </div>
  </div>
</div>