<div class="container-fluid resource-edit">
    <form *ngIf="resourceForm" 
         [formGroup]="resourceForm">
        <div class="row pt-3">
            <div class="col-md-5">
                <h5>Report Details</h5>
                <p>Provide a name and description for this template.</p>
            </div>
            <div class="col-md-7 form-group">
                <div *ngIf="reportType !== 'SalesOrderDetail'"
                     class="form-row">
                    <div class="form-group col-md-12">
                        <p class="mb-1">Available to Suppliers</p>
                        <label class="switch mb-0"
                               for="AvailableToSuppliers">
                          <input type="checkbox"
                                 class="form-check-input"
                                 id="AvailableToSuppliers"
                                 showErrors
                                 [resourceForm]="resourceForm"
                                 aria-describedby="AvailableToSuppliers"
                                 formControlName="AvailableToSuppliers"
                                 value="reportTemplate?.AvailableToSuppliers ? "
                                 (input)="handleUpdateReportTemplate($event, 'AvailableToSuppliers')">
                          <span class="slider round cursor-pointer"></span>
                        </label>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-12">
                        <label for="Name">Template Name</label>
                        <input type="text"
                               class="form-control"
                               id="Name"
                               showErrors
                               aria-describedby="TemplateName"
                               [resourceForm]="resourceForm"
                               formControlName="Name"
                               (input)="handleUpdateReportTemplate($event, 'Name')"
                               placeholder="Enter template name"
                        >
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-12">
                        <label for="Description">Template Description</label>
                        <textarea type="text"
                                  class="form-control"
                                  formControlName="Description"
                                  (input)="handleUpdateReportTemplate($event, 'Description')"
                                  placeholder="Optional: Enter a template description"
                                  rows="3"
                                  maxLength="300"></textarea>
                            <small translate>Optional: Enter a short description to help explain what data is expected from this report, limit 300 characters</small>
                    </div>
                </div>
            </div>
        </div>
        <div class="row pt-3">
            <div class="col-md-5">
                <h5>Headers</h5>
                <p>Select which fields to display as headers.</p>
            </div>
            <div class="col-md-7 form-group">
                <div class="form-row">
                    <div *ngIf="headers?.length"
                         class="form-group col-md-12">
                      <div class="d-block">
                         <button class="btn btn-link text-info mr-2"
                                (click)="handleSelectAllHeaders()">
                            Select All
                        </button>
                        <button class="btn btn-link text-info"
                                (click)="handleUnselectAllHeaders()">
                            Unselect All
                        </button>
                      </div>
                        <ng-container *ngFor="let header of headers">
                            <div class="chip editable"
                                 (click)="toggleHeader(header.path)"
                                 [ngClass]="{'active': isHeaderSelected(header.path)}">
                                  {{ header.value }}
                                <fa-icon *ngIf="isHeaderSelected(header.path)"
                                         [icon]="faCheckCircle">
                                </fa-icon>
                            </div>
                        </ng-container>
                    </div>
                </div>
            </div>
        </div>
        <div class="row pt-3">
            <div class="col-md-5">
                <h5>Filters</h5>
                <p>Select which values are allowed to display on a report.</p>
                <p class="font-italic">If no filters are selected for a field, all values will be included.</p>
            </div>
            <div class="col-md-7 form-group">
                <div class="form-row">
                    <div *ngIf="filters?.length"
                          class="form-group col-md-12">
                        <ng-container *ngFor="let filter of filters; index as i">
                            <h6 class="mt-3">{{ filter.name }}</h6>
                            <div class="custom-control custom-checkbox mr-3">
                                <input type="checkbox"
                                       class="custom-control-input"
                                       (change)="toggleIncludeAllValues($event.target.checked, filter)"
                                       id="{{filter.name}}"
                                       [checked]="filter?.path && !checkForChipDisplay(filter)">
                                <label class="custom-control-label"
                                       for="{{filter.name}}">Include All Values</label>
                              </div>
                                <ng-container *ngFor="let filterValue of filter.filterValues">
                                    <div *ngIf="filter?.path && checkForChipDisplay(filter)"
                                         class="chip editable"
                                         (click)="toggleFilter(filter, filterValue)"
                                         [ngClass]="{'active': isFilterValueSelected(filter, filterValue)}">
                                          {{ filterValue.Name || filterValue.label || filterValue }}
                                        <fa-icon *ngIf="isFilterValueSelected(filter, filterValue)"
                                                 [icon]="faCheckCircle">
                                        </fa-icon>
                                    </div>
                                </ng-container>
                        </ng-container>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>