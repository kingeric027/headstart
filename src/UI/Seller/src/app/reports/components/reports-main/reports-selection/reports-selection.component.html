<div class="row pt-3">
    <div class="col-md-5">
        <h5>Report Selection</h5>
        <p>Choose the report type and template to process.</p>
    </div>
    <div class="col-md-7 form-row">
        <div class="form-group col-md-6">
            <form [formGroup]="reportSelectionForm">
                <label for="ReportType">Report Type</label>
                <select class="form-control" 
                        type="dropdown" 
                        id="ReportType" 
                        aria-describedby="Report Type"
                        formControlName="ReportType" 
                        (change)="updateReportType($event.target.value)">
                    <option default 
                            disabled 
                            [ngValue]="null">Select a report type</option>
                    <option *ngFor="let reportType of reportTypes" 
                            [value]="reportType.Value">
                        {{reportType.Name}}
                    </option>
                </select>
            </form>
        </div>
        <div class="form-group col-md-6">
            <form [formGroup]="reportSelectionForm">
                <label for="ReportTemplate">Report Template</label>
                <select class="form-control" 
                        type="dropdown" 
                        id="ReportTemplate" 
                        aria-describedby="Report Template"
                        formControlName="ReportTemplate" 
                        [attr.disabled]="!reportTemplates.length ? true : null"
                        (change)="updateReportTemplate($event.target.value)">
                    <option default 
                            disabled 
                            [ngValue]="null">Select a report template</option>
                    <option *ngFor="let reportTemplate of reportTemplates" 
                            [value]="reportTemplate.id">
                        {{reportTemplate.Name}}
                    </option>
                </select>
            </form>
        </div>
        <div *ngIf="selectedTemplate?.id" 
              class="col-md-12">
            <div class="mt-3">
                <h6>Description</h6>
                <p>{{selectedTemplate.Description}}</p>
            </div>
            <div class="form-row">
              <div class="col-md-12">
                <button class="btn btn-link text-info"
                        (click)="toggleShowDetails()">
                    {{getDetailsDisplayVerb()}} Details
                </button>
                <div *ngIf="showDetails">
                    <h6 class="mt-3">Headers</h6>
                    <ng-container *ngFor="let header of displayHeaders">
                        <div class="chip readonly active">
                            {{header}}
                        </div>
                    </ng-container>
                    <h6 class="mt-3">Filters</h6>
                    <perfect-scrollbar style="width: 100%">
                        <table class="table table-sm table-hover">
                          <thead>
                            <tr>
                              <th translate>Name</th>
                              <th translate>Values</th>
                            </tr>
                          </thead>
                          <tbody>
                            <ng-container *ngFor="let filter of filterEntries">
                              <tr>
                                <td>
                                  {{ filter[0] }}
                                </td>
                                <td>
                                  <ng-container *ngIf="!filter[1].length">
                                    <div class="chip readonly">
                                      All Values
                                  </div>
                                  </ng-container>
                                  <ng-container *ngFor="let value of filter[1]">
                                    <div class="chip readonly">
                                        {{ value }}
                                    </div>
                                  </ng-container>
                                </td>
                              </tr>
                            </ng-container>
                          </tbody>
                        </table>
                      </perfect-scrollbar>
                </div>
              </div>
           </div>
        </div>
    </div>
</div>